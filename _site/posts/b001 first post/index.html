<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.353">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Christophe Benavent">
<meta name="dcterms.date" content="2023-08-06">

<title>Christophe Benavent Diary - Note n°1 : Les réseaux sociaux polarisent-ils?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script src="../../site_libs/quarto-diagram/mermaid.min.js"></script>
<script src="../../site_libs/quarto-diagram/mermaid-init.js"></script>
<link href="../../site_libs/quarto-diagram/mermaid.css" rel="stylesheet">


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Christophe Benavent Diary</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">About</span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/BenaventC" rel="" target=""><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/Benavent" rel="" target=""><i class="bi bi-twitter" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Note n°1 : Les réseaux sociaux polarisent-ils?</h1>
                                <div class="quarto-categories">
                <div class="quarto-category">Social Media</div>
                <div class="quarto-category">Polarisation</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Christophe Benavent </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">August 6, 2023</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>Le débat public se nourrit souvent plus d’hypothèses que de faits, il emploie la théorie moins pour comprendre le monde que pour lui appliquer un cadre d’analyse auquel on adhère sans critique, au risque d’en faire un cadre idéologique. La théorie l’effet de polarisation des réseaux sociaux est un bon exemple, nourrissant la défiance qu’on leur témoigne, en attribuant leurs effets aux dispositifs algorithmique, et justifiant ainsila nécessité de les réguler. Or cette thèse trouve un soutien modeste dans les études empiriques.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="polarisation_pew.jpg" class="img-fluid figure-img"></p>
<figcaption class="figure-caption">from Pew research https://www.pewresearch.org/politics/2014/06/12/political-polarization-in-the-american-public/pp-2014-06-12-polarization-0-05/</figcaption>
</figure>
</div>
<p>Popularisée par <span class="citation" data-cites="pariser_filter_2012">Pariser (<a href="#ref-pariser_filter_2012" role="doc-biblioref">2012</a>)</span>, la thèse des bulles de filtre, et celle des chambres d’écho, suggère que les opinions tendent à se polariser et se se radicaliser quand elles se forment dans le bain des réseaux sociaux que les algorithmes font bouillonner.</p>
<p>C’est une hypothèse qui trouve sa raison dans le concept de l’attachement préférentiel <span class="citation" data-cites="barabasi_scale-free_2009">Barabási (<a href="#ref-barabasi_scale-free_2009" role="doc-biblioref">2009</a>)</span>, qui génère une topologie caractéristique des réseaux : la distribution puissance du nombre de liens : une minorité est liée à un grand nombre de nœud, une très grande majorité est peu liée aux autres. Ce mécanisme fondamental génère une exposition sélective : chaque nouveau nœud, dans le réseau se nouant aux nœuds les plus populaires.</p>
<p>De manière plus sociologique, l’attachement préférentiel joue de manière un peu différente. Il est d’abord gouverné par le fait qu’on tend à s’exposer à des gens qui nous ressemblent. C’est une hypothèse raisonnable car elle se fonde sur un mécanisme d’homophilie que les chercheurs ont mis à jour depuis longtemps, distinguant d’ailleurs celle induite par la proximité dans le réseau (les amis de nos amis) de celle générée par similarités d’intérêt (<span class="citation" data-cites="kossinets_origins_2009">Kossinets and Watts (<a href="#ref-kossinets_origins_2009" role="doc-biblioref">2009</a>)</span>).</p>
<p>Sur un plan psychologique, un second mécanisme peut être ajouté, celui de l’attention sélective (<span class="citation" data-cites="janiszewski_influence_2013">Janiszewski, Kuo, and Tavassoli (<a href="#ref-janiszewski_influence_2013" role="doc-biblioref">2013</a>)</span>) surtout si elle se conjugue à des biais de confirmation (<span class="citation" data-cites="nickerson_confirmation_1998">Nickerson (<a href="#ref-nickerson_confirmation_1998" role="doc-biblioref">1998</a>)</span>).</p>
<p>Le troisième mécanisme est technologique, c’est un mécanisme de renforcement qui se joue dans les systèmes de recommandation de nouveaux contacts et de contenus, les algorithmes amplifieraient l’exposition des sujets à ceux avec lesquels ils partagent les mêmes idées. Ce sont les chambres d’écho.</p>
<p>Quand l’ensemble de ces mécanismes s’associent, chacun se trouverait ainsi plus ou moins rapidement isolé dans une bulle dont la surface est le prisme de nos préférences. Un article de <span class="citation" data-cites="geschke_triple-filter_2019">Geschke, Lorenz, and Holtz (<a href="#ref-geschke_triple-filter_2019" role="doc-biblioref">2019</a>)</span> en donne une bonne idée en distinguant justement ces trois type de filtres : individuels (notamment les biais de confirmation mais aussi de recherche de diversité), sociaux (homophilie), et technologiques (moteurs de recommandation). En examinant leurs interactions par des modèles d’agents (ABM), ils montrent que la polarisation émerge quand il y a interaction entre la diffusion centrale de l’information (mass media), partage social de cette information et activation de systèmes de recommandation. Ces derniers pouvant modérer la polarisation lorsque ce qui est recommandé va dans le sens de la diversité de l’information.</p>
<p>Ouvrons une rapide parenthèse, les algorithmes de recommandation servent des buts variés. En général, l’objectif est d’incité l’utilisation à consulter le plus de page possible, pour être exposé aux plus de publicité, ou au plus d’occasion de consommer. Mais des design différents peuvent être proposer pour résoudre d’autre problème, dans les plateformes de musique, l’ennui est un danger et très tôt on a penser introduire des technniques de serendipité, le moyen de produire des saut dans les cheminement thématique. Les algoritmiques ne sont pas monolithique, n dans leur conception, si dans leurs objectifs.</p>
<p>Fermons la parenthèse et revenons à la question principale qui est d’attribuer aux réseaux sociaux une responsabilité dans le phénomène de la polarisation politique, qui se manifeste tant par l’écart croissant entre position relative des valeurs de droite et gauche, que par l’intensité du rejet des uns par les autres.</p>
<p>L’hypothèse est que ce phénomène trouve sa source justement dans ces hypothétiques bulle de filtre, que la technologie en isolant ou accroissant la tendance à l’isolationnisme, produit à la fois une radicalisation des opinions et l’incapacité t’entendre les arguments de l’autre partie.</p>
<p>Pour que cette théorie le deviennent vraiment, et ainsi échappe à l’appropriation de l’idéologie, il est nécessaire que les faits ne la démentent pas. Depuis quelques années, des études à grandes échelle et pour une bonne part expérimentales, ont été menées et leurs résultats publiés. Ils sont extrêmement modestes sur l’effet de polarisation, tout en démontrant l’importance des effets d’exposition.</p>
<p>Schématisons l’idée :</p>
<div class="cell">
<div class="cell-output-display">
<div>
<div>
<pre class="mermaid mermaid-js">flowchart LR
Algorithmes--Renforcement--&gt; B(Exposition Sélective)
Algorithmes --recommandation--&gt; Homophilie
Algorithmes--nudge--&gt; C(Attention Selective) 
Homophilie --imitation--&gt;  C(Attention Selective) 
Homophilie --&gt; B(Exposition Sélective)
Homophilie --conformisme--&gt;  D(Polarisation) 
 B[Exposition Sélective]  --&gt;  C(Attention Selective) 
 C(Attention Selective)  --&gt;  D(Polarisation) 
 B[Exposition Sélective]  --chambre d'écho--&gt;  D(Polarisation) 

</pre>
</div>
</div>
</div>
</div>
<p>La première vient de facebook <span class="citation" data-cites="kramer_experimental_2014">Kramer, Guillory, and Hancock (<a href="#ref-kramer_experimental_2014" role="doc-biblioref">2014</a>)</span>, elle a été controversée dans la mesure où les sujets n’ont pas été informés. Il s’agissait sur une vaste population de contrôler le feed en réduisant les messages positifs et négatifs et en observant l’effet sur le caractère négatif ou positif de la production des sujets exposés. L’hypothèse a été validée mais avec un effet finalement très faible. Si il y a contagion, est est superficielle.</p>
<p><span class="citation" data-cites="huszar_algorithmic_2022">Huszár et al. (<a href="#ref-huszar_algorithmic_2022" role="doc-biblioref">2022</a>)</span> ont conduit quant à eux, un audit de Twitter menant une sorte d’expérience naturelle en comparant un groupe de compte auquel Twitter n’a jamais appliqué ses algorithmes (depuis 2016) et un autre groupe, expérimental, qui subit la curation automatisée de contenu. En construisant un indicateur de multiplication, il compare dans 7 pays les effets sur les tweets produits par les politiques et selon leurs appartenance. Il apparaît que l’effet d’amplification joue, mieux à droite qu’à gauche comme attendu, mais plus pour les partis centraux que pour les extrêmes. Dans le même esprit <span class="citation" data-cites="gonzalez-bailon_asymmetric_2023">González-Bailón et al. (<a href="#ref-gonzalez-bailon_asymmetric_2023" role="doc-biblioref">2023</a>)</span> montre le même phénomène en analysant les contenus vu par 208 millions de compte facebook : c’est vers l’extreme droit que la proportion de pages et de groupes ” douteux” est la plus grande, ségrégation de la consommation de news. Très récemment <span class="citation" data-cites="guess_how_2023">Guess et al. (<a href="#ref-guess_how_2023" role="doc-biblioref">2023</a>)</span> , et <span class="citation" data-cites="nyhan_like-minded_2023">Nyhan et al. (<a href="#ref-nyhan_like-minded_2023" role="doc-biblioref">2023</a>)</span> ont testés spécifiquement l’effet des algorithmes de recommandation en randomisation, au cours de la campagne présidentielle américaine de 2020, l’exposition soit aux algorithmes habituelles, soit un simple fil ante-chronologique. Avec ce dernier les temps passés sur la plateformes se réduisent, ainsi que les likes et commentaires (réduction de moitié) - ce qui au passage confirme l’efficacité des algos pour accroître l’exposition à la pub - et la diversité des contenus s’accroît. En revanche, le degré de polarisation et plus largement les attitudes ne semblent pas changer.</p>
<p>Ces résultats empiriques sont si modestes, qu’un nouvel argument émerge du débat <a href="https://tecunningham.github.io/posts/2023-07-27-meta-2020-elections-experiments.html">par exemple</a>. C’est celui des petits effets (<span class="citation" data-cites="gotz_small_2022">Götz, Gosling, and Rentfrow (<a href="#ref-gotz_small_2022" role="doc-biblioref">2022</a>)</span>) qui s’accumulent, éventuellement se multiplient et finalement ne sont pas incompatibles avec ce qui est observé. C’est une conception qui a trouvé rapidement sa contradiction <span class="citation" data-cites="primbs_are_2023">Primbs et al. (<a href="#ref-primbs_are_2023" role="doc-biblioref">2023</a>)</span>.</p>
<p>Finalement, les choses apparaissent plus plus complexes qu’elle ne sont, à la fois par les hypothèses, mais aussi par les processus. L’attention ne sélectionne par le même, elle peut favoriser le différent, elle est aussi sans doute plus aléatoire qu’on ne pense. L’homophilie n’est peut être pas si systématique, la réalité empirique des réseaux sociaux est qu’on jamais affaire, ou rarement à des composants isolés : la topologie générale est celle d’un macro-composant, chacun est lié à tous et à moins de 6 degré de liberté. Les systèmes de recommandation ne sont pas si efficace que ça, et dans certain cas (musique) intègre des composants de diversité. Leur design n’est pas monolithique. Et n’oublions pas que la crédibilité de l’information qui vient des réseaux sociaux est bien plus faible que les autres médias, ce qu’on y cherche c’est l’étonnant, l’amusant, le sensationnel, bref le divertissement.La complexité vient aussi de la segmentation des publics, l’asymétrie entre les comportement très droite et très à gauche en témoigne.</p>
<p>Il reste aussi un défi méthodologique, le débat des petits effets en donne le la, de concert avec la capacité d’expérimentation massive et in vivo, le rôle des méthode ABM devrait jouer un rôle plus grand, le traitement des données massives devant servir une connaissance empirique plus fine, qui ne se contente pas de p-values mais d’une évaluation précise des paramètres des modèles testés.</p>
<p>Peut-être finalement faut-il recentrer la question. La polarisation, au sens d’un radicalisation des opinions, qui semble se structurer dans ce siècle bien entamé entre une conception conservatrice, paranoïaque, qui fonde ses valeurs dans l’idée que le clan est menacé,alors qu’il est une majorité, moins en nombre qu’en autorité, et cette conception encore progressiste, qui doute d’un contrat social primordial mais ne renonce pas pas à le réaliser, dépends assez eu des technologies qui ne font que fournir les propulsions utiles à leur propagation.</p>
<p>moscovici.</p>




<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-barabasi_scale-free_2009" class="csl-entry" role="listitem">
Barabási, Albert-László. 2009. <span>“Scale-Free Networks: A Decade and Beyond.”</span> <em>Science</em> 325 (5939): 412–13. <a href="https://doi.org/10.1126/science.1173299">https://doi.org/10.1126/science.1173299</a>.
</div>
<div id="ref-geschke_triple-filter_2019" class="csl-entry" role="listitem">
Geschke, Daniel, Jan Lorenz, and Peter Holtz. 2019. <span>“The Triple-Filter Bubble: Using Agent-Based Modelling to Test a Meta-Theoretical Framework for the Emergence of Filter Bubbles and Echo Chambers.”</span> <em>British Journal of Social Psychology</em> 58 (1): 129–49. <a href="https://doi.org/10.1111/bjso.12286">https://doi.org/10.1111/bjso.12286</a>.
</div>
<div id="ref-gonzalez-bailon_asymmetric_2023" class="csl-entry" role="listitem">
González-Bailón, Sandra, David Lazer, Pablo Barberá, Meiqing Zhang, Hunt Allcott, Taylor Brown, Adriana Crespo-Tenorio, et al. 2023. <span>“Asymmetric Ideological Segregation in Exposure to Political News on Facebook.”</span> <em>Science</em> 381 (6656): 392–98. <a href="https://doi.org/10.1126/science.ade7138">https://doi.org/10.1126/science.ade7138</a>.
</div>
<div id="ref-gotz_small_2022" class="csl-entry" role="listitem">
Götz, Friedrich M., Samuel D. Gosling, and Peter J. Rentfrow. 2022. <span>“Small Effects: The Indispensable Foundation for a Cumulative Psychological Science.”</span> <em>Perspectives on Psychological Science</em> 17 (1): 205–15. <a href="https://doi.org/10.1177/1745691620984483">https://doi.org/10.1177/1745691620984483</a>.
</div>
<div id="ref-guess_how_2023" class="csl-entry" role="listitem">
Guess, Andrew M., Neil Malhotra, Jennifer Pan, Pablo Barberá, Hunt Allcott, Taylor Brown, Adriana Crespo-Tenorio, et al. 2023. <span>“How Do Social Media Feed Algorithms Affect Attitudes and Behavior in an Election Campaign?”</span> <em>Science</em> 381 (6656): 398–404. <a href="https://doi.org/10.1126/science.abp9364">https://doi.org/10.1126/science.abp9364</a>.
</div>
<div id="ref-huszar_algorithmic_2022" class="csl-entry" role="listitem">
Huszár, Ferenc, Sofia Ira Ktena, Conor O’Brien, Luca Belli, Andrew Schlaikjer, and Moritz Hardt. 2022. <span>“Algorithmic Amplification of Politics on Twitter.”</span> <em>Proceedings of the National Academy of Sciences</em> 119 (1): e2025334119. <a href="https://doi.org/10.1073/pnas.2025334119">https://doi.org/10.1073/pnas.2025334119</a>.
</div>
<div id="ref-janiszewski_influence_2013" class="csl-entry" role="listitem">
Janiszewski, Chris, Andrew Kuo, and Nader T. Tavassoli. 2013. <span>“The Influence of Selective Attention and Inattention to Products on Subsequent Choice.”</span> <em>Journal of Consumer Research</em> 39 (6): 1258–74. <a href="https://doi.org/10.1086/668234">https://doi.org/10.1086/668234</a>.
</div>
<div id="ref-kossinets_origins_2009" class="csl-entry" role="listitem">
Kossinets, Gueorgi, and Duncan J. Watts. 2009. <span>“Origins of Homophily in an Evolving Social Network.”</span> <em>American Journal of Sociology</em> 115 (2): 405–50. <a href="https://doi.org/10.1086/599247">https://doi.org/10.1086/599247</a>.
</div>
<div id="ref-kramer_experimental_2014" class="csl-entry" role="listitem">
Kramer, Adam D. I., Jamie E. Guillory, and Jeffrey T. Hancock. 2014. <span>“Experimental Evidence of Massive-Scale Emotional Contagion Through Social Networks.”</span> <em>Proceedings of the National Academy of Sciences</em> 111 (24): 8788–90. <a href="https://doi.org/10.1073/pnas.1320040111">https://doi.org/10.1073/pnas.1320040111</a>.
</div>
<div id="ref-nickerson_confirmation_1998" class="csl-entry" role="listitem">
Nickerson, Raymond S. 1998. <span>“Confirmation Bias: A Ubiquitous Phenomenon in Many Guises.”</span> <em>Review of General Psychology</em> 2 (2): 175–220. <a href="https://doi.org/10.1037/1089-2680.2.2.175">https://doi.org/10.1037/1089-2680.2.2.175</a>.
</div>
<div id="ref-nyhan_like-minded_2023" class="csl-entry" role="listitem">
Nyhan, Brendan, Jaime Settle, Emily Thorson, Magdalena Wojcieszak, Pablo Barberá, Annie Y. Chen, Hunt Allcott, et al. 2023. <span>“Like-Minded Sources on Facebook Are Prevalent but Not Polarizing.”</span> <em>Nature</em> 620 (7972): 137–44. <a href="https://doi.org/10.1038/s41586-023-06297-w">https://doi.org/10.1038/s41586-023-06297-w</a>.
</div>
<div id="ref-pariser_filter_2012" class="csl-entry" role="listitem">
Pariser, Eli. 2012. <em>The Filter Bubble: What the Internet Is Hiding from You</em>. London: Penguin books.
</div>
<div id="ref-primbs_are_2023" class="csl-entry" role="listitem">
Primbs, Maximilian A., Charlotte R. Pennington, Daniël Lakens, Miguel Alejandro A. Silan, Dwayne S. N. Lieck, Patrick S. Forscher, Erin M. Buchanan, and Samuel J. Westwood. 2023. <span>“Are Small Effects the Indispensable Foundation for a Cumulative Psychological Science? A Reply to Götz Et Al. (2022).”</span> <em>Perspectives on Psychological Science</em> 18 (2): 508–12. <a href="https://doi.org/10.1177/17456916221100420">https://doi.org/10.1177/17456916221100420</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>